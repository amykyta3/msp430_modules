<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>A Library of MSP430 C Code: atomic.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">A Library of MSP430 C Code
   </div>
   <div id="projectbrief">Collection of peripheral drivers, component drivers, utilities, and other commonly used embedded code.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">atomic.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Atomically and Non-Atomically Executed Code Blocks.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Atomically and Non-Atomically Executed Code Blocks. </p>
<dl class="section date"><dt>Date</dt><dd>4/17/2013</dd></dl>
<p>This header originated from an implementation for the AVR microcontroller. It has been ported to MSP430 and has identical functionality.</p>
<dl class="section note"><dt>Note</dt><dd>The macros in this header file require the ISO/IEC 9899:1999 ("ISO C99") feature of for loop variables that are declared inside the for loop itself. For that reason, this header file can only be used if the standard level of the compiler (option -std=) is set to gnu99. </dd></dl>
</div><div class="textblock"><code>#include &lt;<a class="el" href="msp430__xc_8h_source.html">msp430_xc.h</a>&gt;</code><br />
</div>
<p><a href="atomic_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aaaea265b31dabcfb3098bec7685c39e4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="atomic_8h.html#aaaea265b31dabcfb3098bec7685c39e4">ATOMIC_BLOCK</a>(type)</td></tr>
<tr class="separator:aaaea265b31dabcfb3098bec7685c39e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a362c18b15a09703e42e1c246c47420ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="atomic_8h.html#a362c18b15a09703e42e1c246c47420ef">ATOMIC_RESTORESTATE</a></td></tr>
<tr class="separator:a362c18b15a09703e42e1c246c47420ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92b11103b4b3b000a3190f0d26ba7062"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="atomic_8h.html#a92b11103b4b3b000a3190f0d26ba7062">ATOMIC_FORCEON</a></td></tr>
<tr class="separator:a92b11103b4b3b000a3190f0d26ba7062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e195ee2117559a25f77fbba9054674a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="atomic_8h.html#a6e195ee2117559a25f77fbba9054674a">NONATOMIC_BLOCK</a>(type)</td></tr>
<tr class="separator:a6e195ee2117559a25f77fbba9054674a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab075653bf638fae9db049575741d3152"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="atomic_8h.html#ab075653bf638fae9db049575741d3152">NONATOMIC_RESTORESTATE</a></td></tr>
<tr class="separator:ab075653bf638fae9db049575741d3152"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb959d7d00d2d790b58d0e9880ea255a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="atomic_8h.html#afb959d7d00d2d790b58d0e9880ea255a">NONATOMIC_FORCEOFF</a></td></tr>
<tr class="separator:afb959d7d00d2d790b58d0e9880ea255a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aaaea265b31dabcfb3098bec7685c39e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaea265b31dabcfb3098bec7685c39e4">&#9670;&nbsp;</a></span>ATOMIC_BLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATOMIC_BLOCK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a block of code that is guaranteed to be executed atomically. Upon entering the block the GIE flag in the status register (SR) is disabled, and re-enabled upon exiting the block from any exit path.</p>
<p>Two possible macro parameters are permitted, ATOMIC_RESTORESTATE and ATOMIC_FORCEON. </p>

</div>
</div>
<a id="a92b11103b4b3b000a3190f0d26ba7062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92b11103b4b3b000a3190f0d26ba7062">&#9670;&nbsp;</a></span>ATOMIC_FORCEON</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATOMIC_FORCEON</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a possible parameter for ATOMIC_BLOCK. When used, it will cause the ATOMIC_BLOCK to force the state of the status register on exit, enabling the GIE flag bit.</p>
<p>Care should be taken that ATOMIC_FORCEON is only used when it is known that interrupts are enabled before the block's execution or when the side effects of enabling global interrupts at the block's completion are known and understood. </p>

</div>
</div>
<a id="a362c18b15a09703e42e1c246c47420ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a362c18b15a09703e42e1c246c47420ef">&#9670;&nbsp;</a></span>ATOMIC_RESTORESTATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATOMIC_RESTORESTATE</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a possible parameter for ATOMIC_BLOCK. When used, it will cause the ATOMIC_BLOCK to restore the previous state of the status register, saved before the GIE flag bit was disabled. The net effect of this is to make the ATOMIC_BLOCK's contents guaranteed atomic, without changing the state of the GIE flag when execution of the block completes. </p>

</div>
</div>
<a id="a6e195ee2117559a25f77fbba9054674a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e195ee2117559a25f77fbba9054674a">&#9670;&nbsp;</a></span>NONATOMIC_BLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NONATOMIC_BLOCK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a block of code that is executed non-atomically. Upon entering the block the GIE flag in the status register is enabled, and disabled upon exiting the block from any exit path. This is useful when nested inside ATOMIC_BLOCK sections, allowing for non-atomic execution of small blocks of code while maintaining the atomic access of the other sections of the parent ATOMIC_BLOCK.</p>
<p>Two possible macro parameters are permitted, NONATOMIC_RESTORESTATE and NONATOMIC_FORCEOFF. </p>

</div>
</div>
<a id="afb959d7d00d2d790b58d0e9880ea255a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb959d7d00d2d790b58d0e9880ea255a">&#9670;&nbsp;</a></span>NONATOMIC_FORCEOFF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NONATOMIC_FORCEOFF</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a possible parameter for NONATOMIC_BLOCK. When used, it will cause the NONATOMIC_BLOCK to force the state of the status register on exit, disabling the GIE flag bit.</p>
<p>Care should be taken that NONATOMIC_FORCEOFF is only used when it is known that interrupts are disabled before the block's execution or when the side effects of disabling global interrupts at the block's completion are known and understood. </p>

</div>
</div>
<a id="ab075653bf638fae9db049575741d3152"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab075653bf638fae9db049575741d3152">&#9670;&nbsp;</a></span>NONATOMIC_RESTORESTATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NONATOMIC_RESTORESTATE</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a possible parameter for NONATOMIC_BLOCK. When used, it will cause the NONATOMIC_BLOCK to restore the previous state of the status register, saved before the GIE flag bit was enabled. The net effect of this is to make the NONATOMIC_BLOCK's contents guaranteed non-atomic, without changing the state of the GIE flag when execution of the block completes. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 12 2018 20:59:16 for A Library of MSP430 C Code by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
